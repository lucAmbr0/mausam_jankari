<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App</title>
    <link rel="stylesheet" href="style.css">
     <link rel="shortcut icon" href="drizzle.png" type="image/x-icon">
</head>
<body>
<!--     <script src="script.js"></script> -->
    <main>
        <div id="card">
            <div id="search">
                <input type="text" name="city" id="search-city"  placeholder="Search by city">
                <button type="button" id="srcbtn"><img src="search-logo.png" alt="search-logo"></button>
            </div>
            <div id="weather">
                <img src="drizzle.png" alt="weather-icon" id="weather-icon">
                <h1 id="temp">22&deg;C</h1>
                <h2 id="city">New Delhi</h2>
                <h5 id="type"></h5>
                <div id="details">
                    <div id="col">
                        <img src="humid.png" alt="humidity">
                        <div id="humid-data">
                            <p id="humi">50%</p>
                            <p>Humidity</p>
                        </div>
                    </div>
                        <div id="col">
                            <img src="wind.png" alt="">
                            <div id="wind-data">
                                <p id="Speed">15km/h</p>
                                <p>Wind Speed</p>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </main>
</body>
<script>
    const card = document.querySelector('#card');
    const currentHour = new Date().getHours();
    if (currentHour >= 18 || currentHour < 6) {
    card.style.background = `
    linear-gradient(146deg, rgba(25,25,112,0.8) 0%, rgba(72,61,139,0.85) 50%, rgba(0,0,51,0.9) 100%),
    radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0) 20%),
    radial-gradient(circle at 70% 70%, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0) 20%)
    `;
    card.style.border = '0.3px solid voilet';
    } //else {
    //card.style.background = "linear-gradient(146deg, rgba(31,195,193,0.34) 0%, rgba(1,45,187,0.53) 100%)";
    //card.style.backgroundImage = "none"; // Clear any background image
    //}
    const apikey = '2a19cbcd1b105f6ee37111528b3e0794';
    const apiurl = 'https://api.openweathermap.org/data/2.5/weather?units=metric&q=';
    const userser = document.querySelector('#search-city');
    const srcbtn = document.querySelector('#srcbtn');
    const weticon = document.querySelector('#weather-icon')
    const type = document.querySelector('#type')
    async function checkWeather(city){
        const response = await fetch(apiurl +city+ `&appid=${apikey}`);
        var data  = await response.json();
        console.log(data);
        // document.querySelector('#st').innerHTML=
        document.querySelector('#city').innerHTML=data.name+" ("+data.sys.country+")";
        document.querySelector('#temp').innerHTML=data.main.temp+"&deg;c";
        document.querySelector('#humi').innerHTML=data.main.humidity+"%";
        document.querySelector('#Speed').innerHTML=data.wind.speed+" km/h";
        const currentHour = new Date().getHours();
        if (data.weather[0].main=="Clear") {
            if (currentHour >= 18 || currentHour < 6) {
            weticon.src = "moon.png";
            // weticon.style.filter = 'brightness(-20%)';// Use moon icon if it's nighttime
        } else {
            weticon.src = "clear.png"; // Use sun icon during the day
        }
            type.innerHTML = "Clear weather";
            type.style.color="white";
            type.style.fontWeight="400";
        }
        else if(data.weather[0].main=="Thunderstorm"){
            weticon.src="thunder.png";
            type.innerHTML = "Thunderstorm";
            type.style.color="white";
            type.style.fontWeight="400";
        }
        else if(data.weather[0].main=="Rain"){
            weticon.src="rain.png";
            type.innerHTML = "HeavyRain";
            type.style.color="white";
            type.style.fontWeight="400";
        }
        else if(data.weather[0].main=="Drizzle"){
            weticon.src="drizzle.png";
            type.innerHTML = "Light rain";
            type.style.color="white";
            type.style.fontWeight="400";
        }
        else if(data.weather[0].main=="Clouds"){
            weticon.src="cloudy.png";
            type.innerHTML ="Cloudy";
            type.style.color="white";
            type.style.fontWeight="400";
        }
        else if(data.weather[0].main=="Haze"){
            weticon.src="mist.png";
            type.innerHTML = "Haze/Fogg";
            type.style.color="white";
            type.style.fontWeight="400";
        }
        else if(data.weather[0].main=="Mist"){
            weticon.src="mist.png";
            type.innerHTML = "Haze/Fogg";
            type.style.color="white";
            type.style.fontWeight="400";
        }
    }
    srcbtn.addEventListener("click", ()=>{
        checkWeather(userser.value);
    })
    // checkWeather();
</script>
</html>
